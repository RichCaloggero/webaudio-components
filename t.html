<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Test</title>
</head>
<body> 
<h1>Test</h1>
<div id="status" role="status"></div>
<audio crossorigin="anonymous" src="./t.opus" controls></audio>

<script src="binder.js"></script>
<!--<script type="module" src="setops.js"></script>
<script type="module" src="audioComponent.js"></script>
<script type="module" src="components.js"></script>
-->

<script type="module">
import {AudioComponent, audioContext} from "./audioComponent.js";
import {filter, series, app} from "./components.js";

import * as setop from "./setops.js";

const c = audioContext;
const media = document.querySelector("audio");
const source = c.createMediaElementSource(media);
const player = new AudioComponent(audioContext, "Audio Player");
player.webaudioNode = source;
player.input = null;
source.connect(player.output);

const speakers = new AudioComponent(audioContext, "Speakers");
speakers.webaudioNode = audioContext.destination;
speakers.input.connect(audioContext.destination);
speakers.output = null;

const root = series({},
player,
filter(),
speakers
);

document.body.appendChild(app({}, root).container);
</script>

</body>
</html>
