<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Test</title>
</head>
<body>
<h1>Testing S</h1>
<button id="clear" accesskey="c">clear</button>

<label>farenheight: <input type="number" id="f" step="0.1"></label>
<label>centigrade: <input type="number" id="c" step="0.1"></label>
<hr><div id="log" role="log"></div>

<script type="module">
import * as jSig from "./jSig.js";
import S from "./S.module.js";

S.root(() => {
const f = jSig.numericSignal($("#f"), 0);
const c = jSig.numericSignal($("#c"), 0);
const clear = jSig.clickSignal($("#clear"));

const f0 = S(() => 9/5 * c() + 32);
const c0 = S(() => (5/9) * (f() - 32));

S(() => $("#f").value = f0());
S(() => $("#c").value = c0());

probe("f", f);
probe("c", c);
probe("f0", f0);
probe("c0", c0);

S(() => {clear(); $("#log").innerHTML = "";});
}); // root

function probe (name, signal) {S(() => message(`${name}: ${signal()}`));}

function message(text) {
$("#log").insertAdjacentHTML("beforeEnd", `<p>${text}</p>`);
} // message

function $ (s, c = document) {return c.querySelector(s);}
function $$ (s, c = document) {return [...c.querySelectorAll(s)];}
</script>

</body>
</html>
