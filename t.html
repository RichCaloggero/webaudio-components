<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Test</title>
</head>
<body> 


<script type="module">
import {AudioComponent, audioContext} from "./audioComponent.js";
import * as audio from "./components.js";
import * as setop from "./setops.js";
import {getValue, setValue} from "./binder.js";

const commonOptions = "bypass, silentBypass, mix";
const media = document.querySelector("audio");

document.body.appendChild(audio.app("enableAutomation; automationInterval=0.1",
audio.series("hide=mix, bypass, silentBypass",
window.player = audio.player("show=media, play, position; position=1700; media=t.opus"),
window.panner = audio.panner(`
radius=1 | 20 * abs(cos(t/3 + 1));
angle=0 | t/2;
positionX=0; positionY=0; positionZ=0;
distanceModel=inverse; maxDistance=100; refDistance=50; rolloffFactor=0.3;
orientationX=0; orientationY=0; orientationZ=0;
channelCount=2; panningModel=HRTF;
hide=orientationX, orientationY, orientationZ, coneInnerAngle, coneOuterAngle;
`),
createXtc(),
audio.destination()
) // series
)); // audio.app

function createXtc () {
return audio.series("bypass=true; hide=silentBypass; mix=1",
createBand("type=highpass; frequency=500; Q=0.26; gain=1"),
window.xtc = audio.xtc("delay=0.00007; feedback=0.95; reverseStereo=1; gain=-1"),
createBand("frequency=1000; gain=1"),
); // series
} // createXtc

function createBand (options) {
return audio.series(`hide=${commonOptions}`,
audio.filter(`hide=${commonOptions}, detune; ${options}`),
audio.gain(`hide=${commonOptions}; gain=1`)
); // series
} // createBand

</script>

</body>
</html>
