<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Test</title>
</head>
<body> 
<audio crossorigin="anonymous"
src="./t.flac"
controls></audio>

<!--<script type="module" src="setops.js"></script>
<script type="module" src="audioComponent.js"></script>
<script type="module" src="components.js"></script>
-->

<script type="module">
import {AudioComponent, audioContext} from "./audioComponent.js";
import * as audio from "./components.js";
import * as setop from "./setops.js";

const media = document.querySelector("audio");
const source = audioContext.createMediaElementSource(media);

document.body.appendChild(audio.app("",
audio.series(
audio.player(media),

audio.series("bypass; mix=-0.4",
audio.reverseStereo(),
parallelFilters(),
audio.delay("delay=0.00009; feedBack=0")
), // series

audio.destination()
) // series
)); // audio.app

function parallelFilters () {
return audio.series("bypass",
audio.filter("silentBypass=true; type=lowshelf; frequency=500; Q=8.4; gain=-100"),
audio.filter("bypass; silentBypass=true; type=highshelf; frequency=8000; Q=8.4; gain=-100"),
audio.gain("gain=2.0")
); // parallel
} // parallelFilters

function seriesFilters () {
return audio.series("bypass",
audio.filter("bypass; silentBypass=true; type=lowshelf; frequency=300; Q=1.3; gain=-40"),
audio.filter("bypass; silentBypass=true; type=highshelf; frequency=2000; Q=1.3; gain=-40"),
audio.gain("gain=2.0")
); // series
} // seriesFilters

</script>

</body>
</html>
