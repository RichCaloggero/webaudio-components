<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Test</title>
</head>
<body> 
<audio crossorigin="anonymous"
src="./t.m4a"
controls></audio>

<div id="ui">
<label>Parallel filters: <input type="checkbox" checked id="parallel-filters"></label>
</div>

<!--<script type="module" src="setops.js"></script>
<script type="module" src="audioComponent.js"></script>
<script type="module" src="components.js"></script>
-->

<script type="module">
import {AudioComponent, audioContext} from "./audioComponent.js";
import * as audio from "./components.js";
import * as setop from "./setops.js";

const media = document.querySelector("audio");
const source = audioContext.createMediaElementSource(media);

document.body.appendChild(audio.app("",
audio.series(
audio.player(media),

//audio-series("",
audio.series("bypass; mix=-0.4; feedBack=0.8; delay=0.00009; delayBeforeOutput=true",
audio.reverseStereo(),
parallelFilters(),
), // series

//audio.gain("gain=1.3")
//), // series

audio.destination()
) // series
)); // audio.app

function seriesFilters () {
return audio.series("bypass",
audio.filter("type=highpass; frequency=300; Q=4.3"),
audio.filter("type=lowpass; frequency=4000; Q=4.3")
); // series
} // seriesFilters

function parallelFilters () {
return audio.parallel("bypass",
audio.filter("type=lowshelf; frequency=300; Q=4.3"),
audio.filter("type=highshelf; frequency=4000; Q=4.3")
); // parallel
} // parallelFilters

</script>

</body>
</html>
