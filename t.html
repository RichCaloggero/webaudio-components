<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Test</title>
</head>
<body> 
<audio crossorigin="anonymous" src="./t.flac" controls></audio>

<!--<script type="module" src="setops.js"></script>
<script type="module" src="audioComponent.js"></script>
<script type="module" src="components.js"></script>
-->

<script type="module">
import {AudioComponent, audioContext} from "./audioComponent.js";
import * as audio from "./components.js";
import * as setop from "./setops.js";

const media = document.querySelector("audio");
const source = audioContext.createMediaElementSource(media);

/*const s = audioContext.createChannelSplitter(2);
const m = audioContext.createChannelMerger(2);
source.connect(s);
s.connect(m, 0,1);
s.connect(m, 1,0);
m.connect(audioContext.destination);
*/

const root = audio.series(
audio.player(media),

audio.series("mix=0; feedBack; delay=0.00009",
audio.reverseStereo("mix; bypass"),
audio.filter("type=highpass; frequency=300; Q=4.3"),
audio.filter("type=lowpass; frequency=4000; Q=4.3"),
), // series

audio.destination()
); // series

document.body.appendChild(audio.app(root));
</script>

</body>
</html>
